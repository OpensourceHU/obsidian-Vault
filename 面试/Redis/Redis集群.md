## 集群
关于Redis的Hash槽分区可以参考[[../系统设计/负载均衡术#虚拟槽分区]]
Redis集群采用槽指派的方式进行集群构建; 
将key 进行一个CRC16运算 得到的值与hash槽数量16384进行取模得到hash槽的下标位置  进而确定这个key是存放在哪个节点上的;
## 主从
需要注意的是, 当在进行同步的时候  会进行psync(增量同步)[psync文档](https://redis.io/commands/psync/)
主从双方维护一个offset变量 , 相当于对每个命令的一个自增ID 通过对比这个偏移量可以判断是进行增量同步还是全量同步(redis的策略是优先进行增量同步)
当同步完成后, 从节点会继续监听主节点发来的AOF消息

